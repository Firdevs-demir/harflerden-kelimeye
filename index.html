<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Harfleri Tanıyorum - Kur'an Öğreniyorum</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Comic+Neue:wght@700&family=Open+Sans:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #FF6B6B;
            --secondary: #4ECDC4;
            --accent: #FFE66D;
            --dark: #292F36;
            --light: #F7FFF7;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html, body {
            width: 100%;
            height: 100%;
            overflow-x: hidden;
        }
        
        body {
            font-family: 'Open Sans', sans-serif;
            margin: 0;
            padding: 0;
            color: var(--dark);
            background-image: url('https://img.freepik.com/free-vector/desert-landscape-background_23-2148267130.jpg');
            background-size: cover;
            background-attachment: fixed;
            background-position: center;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .container {
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
        }
        
        /* Oyun Açıklama Stilleri */
        .oyun-aciklama {
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            font-family: 'Open Sans', sans-serif;
            border-left: 5px solid var(--secondary);
            position: relative;
        }
        
        .oyun-aciklama h2 {
            color: var(--primary);
            text-align: center;
            margin-bottom: 15px;
            font-family: 'Comic Neue', cursive;
            font-size: 1.8em;
        }
        
        .oyun-aciklama h3 {
            color: var(--dark);
            text-align: center;
            margin: 15px 0 10px 0;
        }
        
        .oyun-aciklama ol, 
        .oyun-aciklama ul {
            padding-left: 25px;
            text-align: left;
        }
        
        .oyun-aciklama li {
            margin-bottom: 8px;
            line-height: 1.6;
        }
        
        .kapat-butonu {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        /* Oyun Alanı Stilleri */
        .header {
            text-align: center;
            margin-bottom: 30px;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            color: var(--primary);
            font-size: 2.5em;
            margin-bottom: 10px;
            font-family: 'Comic Neue', cursive;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.1);
        }
        
        .penguen-container {
            position: relative;
            margin: 20px auto;
            width: 150px;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }
        
        .penguen-konuşma {
            position: absolute;
            top: -70px;
            left: 50%;
            transform: translateX(-50%);
            background-color: white;
            padding: 15px;
            border-radius: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            font-size: 16px;
            max-width: 220px;
            opacity: 0;
            transition: all 0.3s;
            border: 3px solid var(--accent);
            font-family: 'Comic Neue', cursive;
        }
        
        .penguen-konuşma:after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            margin-left: -10px;
            border-width: 15px 10px 0;
            border-style: solid;
            border-color: white transparent transparent;
        }
        
        .oyun-alani {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            margin-bottom: 30px;
            transition: all 0.3s;
        }
        
        .soru-bilgileri {
            margin-bottom: 25px;
            text-align: center;
        }
        
        .sayaç {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-weight: bold;
            font-size: 1.2em;
            background-color: var(--accent);
            padding: 15px;
            border-radius: 15px;
            color: var(--dark);
            box-shadow: 0 5px 10px rgba(0,0,0,0.1);
        }
        
        .soru-metni {
            font-family: 'Amiri', serif;
            font-size: 3em;
            margin: 25px 0;
            color: var(--dark);
            min-height: 70px;
            background-color: var(--light);
            padding: 15px;
            border-radius: 15px;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .olusturulan-kelime {
            font-family: 'Amiri', serif;
            font-size: 3em;
            margin: 25px 0;
            color: var(--primary);
            min-height: 70px;
            text-align: center;
            letter-spacing: 0;
            background-color: var(--light);
            padding: 15px;
            border-radius: 15px;
            border: 3px dashed var(--secondary);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }
        
        .olusturulan-kelime.dogru {
            animation: dogruAnimasyon 1s;
            background-color: #e0f7fa;
            border-color: #4caf50;
        }
        
        @keyframes dogruAnimasyon {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .secenekler {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .harf-secenek {
            font-family: 'Amiri', serif;
            font-size: 2.5em;
            background-color: var(--secondary);
            color: white;
            border: none;
            border-radius: 15px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 10px rgba(0,0,0,0.1);
        }
        
        .harf-secenek:hover {
            background-color: #3dbeb6;
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
        }
        
        .harf-secenek:active {
            transform: translateY(0) scale(0.98);
        }
        
        .harf-secenek.secili {
            background-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
        }
        
        .harf-secenek.dogru {
            background-color: #4caf50;
            animation: harfDogru 0.5s;
        }
        
        @keyframes harfDogru {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        .harf-secenek.yanlis {
            background-color: #f44336;
            animation: harfYanlis 0.5s;
        }
        
        @keyframes harfYanlis {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .kontrol-paneli {
            text-align: center;
            margin-top: 30px;
        }
        
        .kontrol-paneli button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s;
            margin: 0 10px 20px;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            font-family: 'Comic Neue', cursive;
        }
        
        .kontrol-paneli button:hover {
            background-color: #e05555;
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }
        
        .kontrol-paneli button:active {
            transform: translateY(0) scale(0.98);
        }
        
        .kontrol-paneli button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        #sifirlaBtn {
            background-color: #ff9800;
        }
        
        #sifirlaBtn:hover {
            background-color: #e68a00;
        }
        
        .ayarlar {
            display: flex;
            justify-content: center;
            gap: 20px;
            align-items: center;
            margin-top: 20px;
            font-size: 1em;
            flex-wrap: wrap;
        }
        
        .sonuc-ekrani {
            text-align: center;
            padding: 40px;
            background-color: white;
            border-radius: 30px;
            margin-top: 30px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
            display: none;
            position: relative;
            overflow: hidden;
        }
        
        .sonuc-ekrani h2 {
            color: var(--primary);
            font-size: 2.5em;
            margin-bottom: 20px;
            font-family: 'Comic Neue', cursive;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.1);
        }
        
        .sonuc-ekrani p {
            font-size: 1.3em;
            margin-bottom: 30px;
        }
        
        .rozet {
            width: 150px;
            height: 150px;
            margin: 20px auto;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            animation: spin 2s linear infinite;
            display: none;
        }
        
        .rozet-altin {
            background-image: url('https://cdn-icons-png.flaticon.com/512/3132/3132693.png');
        }
        
        .rozet-gumus {
            background-image: url('https://cdn-icons-png.flaticon.com/512/3132/3132681.png');
        }
        
        .rozet-bronz {
            background-image: url('https://cdn-icons-png.flaticon.com/512/3132/3132691.png');
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.2); }
            100% { transform: rotate(360deg) scale(1); }
        }
        
        .konfeti {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10;
            display: none;
        }
        
        .konfeti-parcasi {
            position: absolute;
            width: 15px;
            height: 15px;
            background-color: #f00;
            border-radius: 50%;
            animation: konfetiDusus 5s linear forwards;
        }
        
        @keyframes konfetiDusus {
            0% { 
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            100% { 
                transform: translateY(1000px) rotate(720deg);
                opacity: 0;
            }
        }
        
        .yildiz {
            position: absolute;
            font-size: 30px;
            color: gold;
            animation: yildizAnimasyon 1s forwards;
            opacity: 0;
            z-index: 5;
        }
        
        @keyframes yildizAnimasyon {
            0% { 
                transform: scale(0);
                opacity: 0;
            }
            50% { 
                transform: scale(1.5);
                opacity: 1;
            }
            100% { 
                transform: scale(1);
                opacity: 0;
            }
        }
        
        .progress-container {
            width: 100%;
            height: 20px;
            background-color: #f0f0f0;
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
            box-shadow: inset 0 0 5px rgba(0,0,0,0.2);
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #4ECDC4, #FF6B6B);
            width: 0%;
            transition: width 0.5s;
            border-radius: 10px;
        }

        /* Ses kontrol butonları */
        .ses-kontrol {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 100;
        }

        .ses-btn {
            background-color: rgba(255, 255, 255, 0.8);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }

        .ses-btn:hover {
            transform: scale(1.1);
            background-color: white;
        }

        .ses-btn img {
            width: 24px;
            height: 24px;
        }
        
        /* Tam Ekran Butonu */
        .tam-ekran-butonu {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: rgba(255, 255, 255, 0.8);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 100;
            font-size: 20px;
        }
        
        /* Müzik yükleme alanı */
        .muzik-yukleme {
            text-align: center;
            margin-top: 15px;
            padding: 10px;
            background-color: rgba(255,255,255,0.8);
            border-radius: 10px;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 10px;
            }
            
            .oyun-aciklama {
                padding: 20px 15px 15px 15px;
            }
            
            .kapat-butonu {
                top: 10px;
                right: 10px;
            }
            
            .soru-metni, .olusturulan-kelime {
                font-size: 2em;
            }
            
            .harf-secenek {
                font-size: 1.8em;
                height: 60px;
                padding: 10px;
            }
            
            .secenekler {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .kontrol-paneli button {
                padding: 12px 20px;
                margin: 0 5px 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Ses Kontrol Butonları -->
    <div class="ses-kontrol">
        <button class="ses-btn" id="muzikToggle">
            <img src="https://cdn-icons-png.flaticon.com/512/3669/3669483.png" alt="Müzik Aç/Kapat">
        </button>
        <button class="ses-btn" id="efektToggle">
            <img src="https://cdn-icons-png.flaticon.com/512/814/814514.png" alt="Efekt Aç/Kapat">
        </button>
    </div>

    <!-- Tam Ekran Butonu -->
    <button class="tam-ekran-butonu" id="tamEkranBtn">⛶</button>

    <div class="container">
        <div class="header">
            <h1>Harfleri Tanıyorum! 🎉</h1>
            <h1>Haydi بسم الله 🦉</h1>
            <div class="penguen-container">
                <img src="https://cdn-icons-png.flaticon.com/512/2698/2698231.png" alt="Penguen" width="120">
                <div class="penguen-konuşma" id="penguenMesaj">Hadi başlayalım! Harfleri doğru sırayla seç!</div>
            </div>
        </div>

        <!-- Oyun Açıklama -->
        <div class="oyun-aciklama" id="oyunAciklama">
            <button class="kapat-butonu" id="kapatButonu">×</button>
            <h2>Nasıl Oynanır?</h2>
            <p style="text-align: center;">🎯 <strong>Oyunun Amacı:</strong> Arapça kelimeleri oluşturan harfleri doğru sırayla seçerek puan kazanmak!</p>
            
            <h3>🔠 Oyun Kuralları:</h3>
            <ol>
                <li>Ekranda gösterilen harekeli Arapça kelimeyi inceleyin</li>
                <li>Alttaki harf butonlarından kelimenin harflerini <strong>doğru sırayla</strong> seçin</li>
                <li>Seçtiğiniz harfler üstteki kutuda görünecek</li>
                <li>Harf sayısı tamamlandığında <strong>"Kontrol Et"</strong> butonuna basın</li>
                <li>Doğru sırada her harf için 20 puan, tam doğru kelime için ekstra 50 puan</li>
                <li>Her 3 doğru cevapta bir seviye atlayacaksınız</li>
            </ol>
            
            <h3>🎮 Kontroller:</h3>
            <ul>
                <li><strong>Harf Seçme:</strong> Harf butonlarına tıklayın</li>
                <li><strong>Sıfırlama:</strong> "Sıfırla" butonuyla seçimleri temizleyin</li>
                <li><strong>Ses Ayarları:</strong> Sağ üst köşeden sesleri kontrol edin</li>
                <li><strong>Tam Ekran:</strong> Sağ alt köşedeki ⛶ butonuyla tam ekran yapabilirsiniz</li>
            </ul>
            
            <!-- Müzik yükleme alanı -->
            <div class="muzik-yukleme">
                <h3>🎵 Kendi Müziğinizi Yükleyin</h3>
                <input type="file" id="muzikYukle" accept="audio/*">
                <p>MP3, WAV veya diğer ses formatlarını yükleyebilirsiniz</p>
            </div>
        </div>

        <!-- Oyun Alanı -->
        <div class="oyun-alani">
            <div class="soru-bilgileri">
                <div class="sayaç">
                    <span id="kalanSure">⏱️ 02:00</span>
                    <span id="skor">⭐ Skor: 0</span>
                    <span id="seviye">🔹 Seviye: 1</span>
                </div>
                <div class="progress-container">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
                <div class="soru-metni" id="soruMetni"></div>
                <div class="olusturulan-kelime" id="olusturulanKelime"></div>
            </div>

            <div class="secenekler" id="secenekler"></div>

            <div class="kontrol-paneli">
                <button id="kontrolEtBtn" disabled>✅ KONTROL ET</button>
                <button id="sifirlaBtn">🔄 SIFIRLA</button>
                <div class="ayarlar">
                    <label for="sureAyari">⏳ Süre (dk):</label>
                    <input type="number" id="sureAyari" min="1" max="5" value="2" style="width: 50px;">
                    <button id="baslatBtn">🎮 OYUNU BAŞLAT</button>
                </div>
            </div>
        </div>

        <div class="sonuc-ekrani" id="sonucEkrani">
            <h2 id="sonucBaslik"></h2>
            <p id="sonucDetay"></p>
            <div class="rozet" id="rozet"></div>
            <div class="konfeti" id="konfeti"></div>
            <button id="tekrarOynaBtn">🔄 TEKRAR OYNA</button>
        </div>
    </div>

    <!-- Ses Elementleri -->
    <audio id="arkaplanMuzik" loop>
        <!-- Varsayılan müzik kaldırıldı, kullanıcı kendi müziğini yükleyecek -->
    </audio>
    <audio id="dogruSes">
        <source src="https://www.soundjay.com/buttons/sounds/button-09.mp3" type="audio/mpeg">
    </audio>
    <audio id="yanlisSes">
        <source src="https://www.soundjay.com/buttons/sounds/button-10.mp3" type="audio/mpeg">
    </audio>
    <audio id="tebriklerSes">
        <source src="https://www.soundjay.com/human/sounds/applause-01.mp3" type="audio/mpeg">
    </audio>
    <audio id="baslaSes">
        <source src="https://www.soundjay.com/mechanical/sounds/sci-fi-01.mp3" type="audio/mpeg">
    </audio>
    <audio id="clickSes">
        <source src="https://www.soundjay.com/buttons/sounds/button-01.mp3" type="audio/mpeg">
    </audio>
    <audio id="winSes">
        <source src="https://www.soundjay.com/human/sounds/applause-08.mp3" type="audio/mpeg">
    </audio>
    <audio id="selectSes">
        <source src="https://www.soundjay.com/buttons/sounds/button-03.mp3" type="audio/mpeg">
    </audio>
    <audio id="resetSes">
        <source src="https://www.soundjay.com/buttons/sounds/button-21.mp3" type="audio/mpeg">
    </audio>
    <audio id="startSes">
        <source src="https://www.soundjay.com/buttons/sounds/button-4.mp3" type="audio/mpeg">
    </audio>
    <audio id="hoverSes">
        <source src="https://www.soundjay.com/buttons/sounds/button-10.mp3" type="audio/mpeg">
    </audio>
    <audio id="buttonClickSes">
        <source src="https://www.soundjay.com/buttons/sounds/button-15.mp3" type="audio/mpeg">
    </audio>

    <script>
        // Genişletilmiş kelime havuzu (Hemze ayrımıyla)
        const kelimeler = [
            // Kat'ı hemzeli örnekler (kesra ve damme/fetha ile)
            {arapca: "إِقْرَأْ", harfler: ["إ", "ق", "ر", "أ"]}, // Kesralı kat'ı hemze
            {arapca: "أَمَرَ", harfler: ["أ", "م", "ر"]}, // Fethalı kat'ı hemze
            {arapca: "أُذُنٌ", harfler: ["أ", "ذ", "ن"]}, // Dammeli kat'ı hemze
            {arapca: "إِيَّاكَ", harfler: ["إ", "ي", "ا", "ك"]}, // Fatiha'dan
            {arapca: "أَنْعَمْتَ", harfler: ["أ", "ن", "ع", "م", "ت"]}, // Fatiha'dan
            
            // Vasıl hemzeli örnekler
            {arapca: "اِسْمُ", harfler: ["ا", "س", "م"]}, // Vasıl hemze (baştaki)
            {arapca: "اَلرَّحْمٰنِ", harfler: ["ا", "ل", "ر", "ح", "م", "ن"]}, // Vasıl hemze
            {arapca: "اَلرَّحِيمِ", harfler: ["ا", "ل", "ر", "ح", "ي", "م"]}, // Vasıl hemze
            {arapca: "اَلْحَمْدُ", harfler: ["ا", "ل", "ح", "م", "د"]}, // Vasıl hemze
            
            // Diğer kelimeler
            {arapca: "بِسْمِ", harfler: ["ب", "س", "م"]},
            {arapca: "اللّٰهِ", harfler: ["ا", "ل", "ل", "ه"]},
            {arapca: "رَبِّ", harfler: ["ر", "ب"]},
            {arapca: "الْعَالَمِينَ", harfler: ["ا", "ل", "ع", "ا", "ل", "م", "ي", "ن"]},
            {arapca: "مَالِكِ", harfler: ["م", "ا", "ل", "ك"]},
            {arapca: "يَوْمِ", harfler: ["ي", "و", "م"]},
            {arapca: "الدِّينِ", harfler: ["ا", "ل", "د", "ي", "ن"]},
            {arapca: "نَعْبُدُ", harfler: ["ن", "ع", "ب", "د"]},
            {arapca: "نَسْتَعِينُ", harfler: ["ن", "س", "ت", "ع", "ي", "ن"]},
            {arapca: "اهْدِنَا", harfler: ["ا", "ه", "د", "ن", "ا"]},
            {arapca: "الصِّرَاطَ", harfler: ["ا", "ل", "ص", "ر", "ا", "ط"]},
            {arapca: "الْمُسْتَقِيمَ", harfler: ["ا", "ل", "م", "س", "ت", "ق", "ي", "م"]},
            {arapca: "الَّذِينَ", harfler: ["ا", "ل", "ذ", "ي", "ن"]},
            {arapca: "عَلَيْهِمْ", harfler: ["ع", "ل", "ي", "ه", "م"]},
            {arapca: "الْمَغْضُوبِ", harfler: ["ا", "ل", "م", "غ", "ض", "و", "ب"]},
            {arapca: "الضَّالِّينَ", harfler: ["ا", "ل", "ض", "ا", "ل", "ي", "ن"]},
            {arapca: "آمِينَ", harfler: ["ا", "م", "ي", "ن"]},
            {arapca: "الْكِتَابِ", harfler: ["ا", "ل", "ك", "ت", "ا", "ب"]},
            {arapca: "هُدًى", harfler: ["ه", "د", "ى"]},
            {arapca: "لِلْمُتَّقِينَ", harfler: ["ل", "ل", "م", "ت", "ق", "ي", "ن"]},
            {arapca: "يُؤْمِنُونَ", harfler: ["ي", "ؤ", "م", "ن", "و", "ن"]},
            {arapca: "بِالْغَيْبِ", harfler: ["ب", "ا", "ل", "غ", "ي", "ب"]},
            {arapca: "وَيُقِيمُونَ", harfler: ["و", "ي", "ق", "ي", "م", "و", "n"]},
            {arapca: "الصَّلَاةَ", harfler: ["ا", "ل", "ص", "ل", "ا", "ة"]},
            {arapca: "وَمِمَّا", harfler: ["و", "م", "م", "ا"]}
        ];

        // GÜNCELLENMİŞ BENZER HARFLER (Hemze çeşitleri eklendi)
        const benzerHarfler = {
            "ا": ["إ", "أ", "ء", "ل", "ن"],
            "إ": ["ا", "أ", "ء"], // Kesralı kat'ı hemze
            "أ": ["ا", "إ", "ء"], // Fetha/Dammeli kat'ı hemze
            "ء": ["ا", "إ", "أ"], // Hamza tek başına
            "ب": ["ت", "ث", "ن", "ي"],
            "ت": ["ب", "ث", "ن", "ي"],
            "ث": ["ب", "ت", "ن"],
            "ج": ["ح", "خ"],
            "ح": ["ج", "خ", "ه"],
            "خ": ["ج", "ح", "ه"],
            "د": ["ذ"],
            "ذ": ["د", "ز", "ض", "ظ"],
            "ر": ["ز", "ن"],
            "ز": ["ر", "ذ"],
            "س": ["ش"],
            "ش": ["س", "ص"],
            "ص": ["ض", "ش"],
            "ض": ["ص", "ط", "ظ"],
            "ط": ["ظ", "ض"],
            "ظ": ["ط", "ض", "ذ"],
            "ع": ["غ"],
            "غ": ["ع"],
            "ف": ["ق"],
            "ق": ["ف", "ك"],
            "ك": ["ق", "ل"],
            "ل": ["ك", "ن"],
            "م": ["ن"],
            "ن": ["ب", "ت", "ث", "ي", "ل", "م"],
            "ه": ["ح", "خ", "م"],
            "و": ["ن", "ر", "ز", "ي"],
            "ي": ["ب", "ت", "ث", "ن", "ى"]
        };

        // DOM elementleri
        const penguenMesaj = document.getElementById('penguenMesaj');
        const soruMetni = document.getElementById('soruMetni');
        const olusturulanKelime = document.getElementById('olusturulanKelime');
        const secenekler = document.getElementById('secenekler');
        const kalanSure = document.getElementById('kalanSure');
        const skorElement = document.getElementById('skor');
        const seviyeElement = document.getElementById('seviye');
        const progressBar = document.getElementById('progressBar');
        const kontrolEtBtn = document.getElementById('kontrolEtBtn');
        const sifirlaBtn = document.getElementById('sifirlaBtn');
        const baslatBtn = document.getElementById('baslatBtn');
        const sonucEkrani = document.getElementById('sonucEkrani');
        const sonucBaslik = document.getElementById('sonucBaslik');
        const sonucDetay = document.getElementById('sonucDetay');
        const rozet = document.getElementById('rozet');
        const konfeti = document.getElementById('konfeti');
        const tekrarOynaBtn = document.getElementById('tekrarOynaBtn');
        const sureAyari = document.getElementById('sureAyari');
        const muzikToggle = document.getElementById('muzikToggle');
        const efektToggle = document.getElementById('efektToggle');
        const tamEkranBtn = document.getElementById('tamEkranBtn');
        const oyunAciklama = document.getElementById('oyunAciklama');
        const kapatButonu = document.getElementById('kapatButonu');
        const muzikYukle = document.getElementById('muzikYukle');
        const arkaplanMuzik = document.getElementById('arkaplanMuzik');

        // Ses elementleri
        const dogruSes = document.getElementById('dogruSes');
        const yanlisSes = document.getElementById('yanlisSes');
        const tebriklerSes = document.getElementById('tebriklerSes');
        const baslaSes = document.getElementById('baslaSes');
        const clickSes = document.getElementById('clickSes');
        const winSes = document.getElementById('winSes');
        const selectSes = document.getElementById('selectSes');
        const resetSes = document.getElementById('resetSes');
        const startSes = document.getElementById('startSes');
        const hoverSes = document.getElementById('hoverSes');
        const buttonClickSes = document.getElementById('buttonClickSes');

        // Oyun değişkenleri
        let mevcutKelime = null;
        let secilenHarfler = [];
        let skor = 0;
        let sure = 0;
        let zamanlayici = null;
        let kullanilanKelimeler = [];
        let seviye = 1;
        let toplamDogru = 0;
        let muzikAktif = true;
        let efektAktif = true;
        let tamEkranModu = false;

        // Müzik yükleme işlevi
        muzikYukle.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const objectURL = URL.createObjectURL(file);
                arkaplanMuzik.src = objectURL;
                if (muzikAktif) {
                    arkaplanMuzik.play().catch(e => console.log("Müzik çalma hatası:", e));
                }
                penguenKonus("Müziğiniz başarıyla yüklendi! 🎵", 3000);
            }
        });

        // Tam ekran fonksiyonları
        function toggleTamEkran() {
            if (!document.fullscreenElement) {
                // Tam ekran moduna geç
                if (document.documentElement.requestFullscreen) {
                    document.documentElement.requestFullscreen();
                } else if (document.documentElement.webkitRequestFullscreen) { /* Safari */
                    document.documentElement.webkitRequestFullscreen();
                } else if (document.documentElement.msRequestFullscreen) { /* IE11 */
                    document.documentElement.msRequestFullscreen();
                }
                tamEkranBtn.textContent = '⛶';
                tamEkranModu = true;
            } else {
                // Tam ekran modundan çık
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) { /* Safari */
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) { /* IE11 */
                    document.msExitFullscreen();
                }
                tamEkranBtn.textContent = '⛶';
                tamEkranModu = false;
            }
        }

        // Oyun açıklamasını kapat
        function oyunAciklamasiniKapat() {
            oyunAciklama.style.display = 'none';
            // Oyun açıklaması kapatıldığında tam ekran butonunu aktif et
            tamEkranBtn.style.display = 'flex';
            playSes(clickSes);
        }

        // Ses kontrol fonksiyonları
        function toggleMuzik() {
            muzikAktif = !muzikAktif;
            if (muzikAktif) {
                arkaplanMuzik.play().catch(e => console.log("Müzik çalma hatası:", e));
                muzikToggle.innerHTML = '<img src="https://cdn-icons-png.flaticon.com/512/3669/3669483.png" alt="Müzik Açık">';
            } else {
                arkaplanMuzik.pause();
                muzikToggle.innerHTML = '<img src="https://cdn-icons-png.flaticon.com/512/3669/3669484.png" alt="Müzik Kapalı">';
            }
            playSes(clickSes);
        }

        function toggleEfekt() {
            efektAktif = !efektAktif;
            if (efektAktif) {
                efektToggle.innerHTML = '<img src="https://cdn-icons-png.flaticon.com/512/814/814514.png" alt="Efekt Açık">';
            } else {
                efektToggle.innerHTML = '<img src="https://cdn-icons-png.flaticon.com/512/860/860829.png" alt="Efekt Kapalı">';
            }
            playSes(clickSes);
        }

        function playSes(ses) {
            if (!efektAktif) return;
            ses.currentTime = 0;
            ses.play().catch(e => console.log("Ses çalma hatası:", e));
        }

        // Buton hover efekti ve sesi
        function setupButtonHoverEffects() {
            const buttons = document.querySelectorAll('button, .harf-secenek');
            buttons.forEach(button => {
                // Hover efekti
                button.addEventListener('mouseenter', () => {
                    if (!button.disabled) {
                        playSes(hoverSes);
                        button.style.transform = 'translateY(-3px) scale(1.05)';
                    }
                });
                
                // Hover çıkış efekti
                button.addEventListener('mouseleave', () => {
                    if (!button.disabled && !button.classList.contains('secili')) {
                        button.style.transform = '';
                    }
                });
                
                // Tıklama efekti
                button.addEventListener('mousedown', () => {
                    if (!button.disabled) {
                        button.style.transform = 'translateY(1px) scale(0.98)';
                    }
                });
                
                // Tıklama bırakma efekti
                button.addEventListener('mouseup', () => {
                    if (!button.disabled) {
                        button.style.transform = 'translateY(-3px) scale(1.05)';
                    }
                });
            });
        }

        // Oyunu başlat
        function oyunuBaslat() {
            sure = parseInt(sureAyari.value) * 60;
            skor = 0;
            seviye = 1;
            toplamDogru = 0;
            skorElement.textContent = `⭐ Skor: ${skor}`;
            seviyeElement.textContent = `🔹 Seviye: ${seviye}`;
            progressBar.style.width = '0%';
            sonucEkrani.style.display = 'none';
            kullanilanKelimeler = [];
            
            // Sesleri ayarla ve başlat
            arkaplanMuzik.volume = 0.3;
            dogruSes.volume = 0.7;
            yanlisSes.volume = 0.7;
            hoverSes.volume = 0.3;
            buttonClickSes.volume = 0.7;
            
            if (muzikAktif) {
                arkaplanMuzik.play().catch(e => console.log("Müzik çalma hatası:", e));
            }
            playSes(startSes);
            
            // İlk kelimeyi yükle
            sonrakiSoru();
            
            // Süre başlat
            zamanlayiciGuncelle();
            zamanlayici = setInterval(zamanlayiciGuncelle, 1000);
            
            baslatBtn.disabled = true;
            penguenKonus("Hadi başlayalım! Harfleri doğru sırayla seç!", 3000);
        }

        function sonrakiSoru() {
            // Kullanılmayan kelimelerden rastgele seç
            let kullanilmayanlar = kelimeler.filter(k => !kullanilanKelimeler.includes(k.arapca));
            
            if (kullanilmayanlar.length === 0) {
                kullanilanKelimeler = [];
                kullanilmayanlar = kelimeler;
            }
            
            mevcutKelime = kullanilmayanlar[Math.floor(Math.random() * kullanilmayanlar.length)];
            kullanilanKelimeler.push(mevcutKelime.arapca);
            
            soruMetni.textContent = mevcutKelime.arapca;
            olusturulanKelime.textContent = '';
            olusturulanKelime.classList.remove('dogru');
            secilenHarfler = [];
            
            // Seçenekleri hazırla
            secenekleriHazirla();
            
            // Kontrol butonunu devre dışı bırak
            kontrolEtBtn.disabled = true;
        }

        function secenekleriHazirla() {
            secenekler.innerHTML = '';
            
            let tumHarfler = [...mevcutKelime.harfler];
            
            // Hemze özel durumu: Kelimede kat'ı hemze varsa vasıl ekle
            if (mevcutKelime.harfler.includes("إ") || mevcutKelime.harfler.includes("أ")) {
                tumHarfler.push("ا"); // Vasıl hemze ekle
            }
            
            // Benzer harflerden ekle (toplam 6 seçenek olacak)
            const benzerEklenecek = Math.max(6 - mevcutKelime.harfler.length, 0);
            
            for (let i = 0; i < benzerEklenecek; i++) {
                const rastgeleHarfIndex = Math.floor(Math.random() * mevcutKelime.harfler.length);
                const orjinalHarf = mevcutKelime.harfler[rastgeleHarfIndex];
                
                if (benzerHarfler[orjinalHarf]) {
                    const benzerleri = benzerHarfler[orjinalHarf];
                    const rastgeleBenzer = benzerleri[Math.floor(Math.random() * benzerleri.length)];
                    if (!tumHarfler.includes(rastgeleBenzer)) {
                        tumHarfler.push(rastgeleBenzer);
                    }
                }
            }
            
            // Harfleri karıştır
            tumHarfler = karistirDizi(tumHarfler);
            
            // Seçenek butonlarını oluştur
            tumHarfler.forEach((harf) => {
                const buton = document.createElement('div');
                buton.className = 'harf-secenek';
                buton.textContent = harf; // Hemzeler artık normal renkte
                buton.dataset.harf = harf;
                
                buton.addEventListener('click', () => {
                    playSes(selectSes);
                    harfSec(harf, buton);
                });
                
                secenekler.appendChild(buton);
            });
        }

        function harfSec(harf, buton) {
            if (buton.classList.contains('secili')) {
                return;
            }
            
            playSes(buttonClickSes);
            buton.classList.add('secili');
            secilenHarfler.push(harf);
            
            // Oluşturulan kelimeyi güncelle (boşluk olmadan)
            olusturulanKelime.textContent = secilenHarfler.join('');
            
            // Eğer yeterli harf seçildiyse kontrol butonunu aktif et
            kontrolEtBtn.disabled = secilenHarfler.length !== mevcutKelime.harfler.length;
        }

        function kontrolEt() {
            playSes(buttonClickSes);
            let dogruHarfSayisi = 0;
            
            // Her harf için doğru sırada mı kontrol et
            for (let i = 0; i < secilenHarfler.length; i++) {
                // Hemze özel kontrolü
                if (["ا", "إ", "أ"].includes(mevcutKelime.harfler[i])) {
                    if (secilenHarfler[i] === mevcutKelime.harfler[i]) {
                        dogruHarfSayisi++;
                    }
                } 
                // Normal harfler
                else if (secilenHarfler[i] === mevcutKelime.harfler[i]) {
                    dogruHarfSayisi++;
                }
            }
            
            // Puan hesapla (doğru sıradaki her harf için 20 puan)
            let puan = dogruHarfSayisi * 20;
            
            // Tamamen doğruysa bonus puan
            if (dogruHarfSayisi === mevcutKelime.harfler.length) {
                puan += 50;
                olusturulanKelime.classList.add('dogru');
                playSes(dogruSes);
                toplamDogru++;
                yildizEfekti(10);
                
                // Seviye ilerlemesi
                if (toplamDogru >= seviye * 3) {
                    seviye++;
                    seviyeElement.textContent = `🔹 Seviye: ${seviye}`;
                    penguenKonus(`Tebrikler! Seviye ${seviye}'ye geçtin!`, 3000);
                    playSes(winSes);
                }
                
                // Progress bar güncelle
                progressBar.style.width = `${(toplamDogru % 3) * 33.33}%`;
                
                penguenKonus("Maşaallah! Tamamen doğru! 🎉", 3000);
            } else if (dogruHarfSayisi > 0) {
                playSes(dogruSes);
                penguenKonus(`${dogruHarfSayisi} harf doğru sırada!`, 3000);
            } else {
                playSes(yanlisSes);
                penguenKonus("Yanlış sıralama, tekrar deneyin! 😊", 3000);
            }
            
            // Skor güncelle
            skor += puan;
            skorElement.textContent = `⭐ Skor: ${skor}`;
            
            // Seçenekleri renklendir
            document.querySelectorAll('.harf-secenek').forEach(buton => {
                const harf = buton.dataset.harf;
                const index = secilenHarfler.indexOf(harf);
                
                if (index !== -1 && harf === mevcutKelime.harfler[index]) {
                    buton.classList.add('dogru');
                } else if (secilenHarfler.includes(harf)) {
                    buton.classList.add('yanlis');
                }
            });
            
            // 3 saniye sonra yeni soruya geç
            setTimeout(() => {
                if (sure > 0) {
                    rozet.style.display = 'none'; // Rozeti gizle
                    sonrakiSoru();
                }
            }, 3000); 
        }

        function sifirla() {
            playSes(resetSes);
            secilenHarfler = [];
            olusturulanKelime.textContent = '';
            kontrolEtBtn.disabled = true;
            
            document.querySelectorAll('.harf-secenek').forEach(buton => {
                buton.classList.remove('secili', 'dogru', 'yanlis');
            });
        }

        function zamanlayiciGuncelle() {
            sure--;
            const dakika = Math.floor(sure / 60);
            const saniye = sure % 60;
            kalanSure.textContent = `⏱️ ${dakika}:${saniye.toString().padStart(2, '0')}`;
            
            if (sure <= 0) {
                oyunuBitir();
            }
        }

        function oyunuBitir() {
            clearInterval(zamanlayici);
            if (muzikAktif) arkaplanMuzik.pause();
            playSes(tebriklerSes);
            
            // Sonuçları hazırla
            let basariMesaji = "";
            let basariSeviyesi = "";
            
            if (skor >= 500) {
                basariMesaji = "MÜKEMMEL PERFORMANS!";
                basariSeviyesi = "Altın Rozet Kazandınız! 🌟";
                rozet.className = "rozet rozet-altin";
                rozet.style.display = 'block';
                konfetiYarat(150);
            } else if (skor >= 300) {
                basariMesaji = "ÇOK İYİ!";
                basariSeviyesi = "Gümüş Rozet Kazandınız! ✨";
                rozet.className = "rozet rozet-gumus";
                rozet.style.display = 'block';
                konfetiYarat(100);
            } else if (skor >= 150) {
                basariMesaji = "İYİ ÇALIŞMA!";
                basariSeviyesi = "Bronz Rozet Kazandınız! 🔥";
                rozet.className = "rozet rozet-bronz";
                rozet.style.display = 'block';
                konfetiYarat(50);
            } else {
                basariMesaji = "DAHA FAZLA ÇALIŞMALISIN";
                basariSeviyesi = "Daha iyisini yapabilirsin! 💪";
                rozet.style.display = 'none';
            }
            
            sonucEkrani.style.display = 'block';
            sonucBaslik.textContent = basariMesaji;
            sonucDetay.textContent = `Seviye: ${seviye} - Toplam Puan: ${skor} - ${basariSeviyesi}`;
            baslatBtn.disabled = false;
        }

        function konfetiYarat(adet) {
            konfeti.innerHTML = '';
            konfeti.style.display = 'block';
            
            const renkler = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff', '#ff8800'];
            
            for (let i = 0; i < adet; i++) {
                const konfetiParcasi = document.createElement('div');
                konfetiParcasi.className = 'konfeti-parcasi';
                konfetiParcasi.style.left = `${Math.random() * 100}%`;
                konfetiParcasi.style.backgroundColor = renkler[Math.floor(Math.random() * renkler.length)];
                konfetiParcasi.style.animationDuration = `${Math.random() * 3 + 2}s`;
                konfetiParcasi.style.width = `${Math.random() * 10 + 5}px`;
                konfetiParcasi.style.height = `${Math.random() * 10 + 5}px`;
                konfeti.appendChild(konfetiParcasi);
            }
            
            setTimeout(() => {
                konfeti.style.display = 'none';
            }, 5000);
        }

        function yildizEfekti(adet) {
            for (let i = 0; i < adet; i++) {
                const yildiz = document.createElement('div');
                yildiz.className = 'yildiz';
                yildiz.innerHTML = '⭐';
                yildiz.style.left = `${Math.random() * 100}%`;
                yildiz.style.top = `${Math.random() * 100}%`;
                yildiz.style.animationDelay = `${i * 0.1}s`;
                document.body.appendChild(yildiz);
                
                setTimeout(() => {
                    yildiz.remove();
                }, 1000);
            }
        }

        function penguenKonus(mesaj, sure) {
            penguenMesaj.textContent = mesaj;
            penguenMesaj.style.opacity = '1';
            
            setTimeout(() => {
                penguenMesaj.style.opacity = '0';
            }, sure);
        }

        function karistirDizi(dizi) {
            return dizi.sort(() => Math.random() - 0.5);
        }

        // Event listeners
        kontrolEtBtn.addEventListener('click', kontrolEt);
        sifirlaBtn.addEventListener('click', sifirla);
        baslatBtn.addEventListener('click', oyunuBaslat);
        tekrarOynaBtn.addEventListener('click', oyunuBaslat);
        muzikToggle.addEventListener('click', toggleMuzik);
        efektToggle.addEventListener('click', toggleEfekt);
        tamEkranBtn.addEventListener('click', toggleTamEkran);
        kapatButonu.addEventListener('click', oyunAciklamasiniKapat);
        
        // Başlangıçta tam ekran butonunu gizle
        tamEkranBtn.style.display = 'none';
        
        // Buton hover ve tıklama efektleri
        setupButtonHoverEffects();
        
        // Başlangıç mesajı
        setTimeout(() => {
            penguenKonus("Arapça harfleri eğlenerek öğrenmeye hazır mısın? 😊", 3000);
        }, 1000);
    </script>
</body>
</html>
